<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MietRadar München</title>

  <!-- Leaflet CSS -->
  <link rel="preconnect" href="https://unpkg.com">
  <link rel="stylesheet"
        href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin="anonymous" />

  <!-- App CSS -->
  <link rel="stylesheet" href="./style.css?v=7" />
</head>
<body>
  <header>
    <div class="wrap header-row">
      <button class="sb-toggle" id="sbToggle" aria-label="Sidebar öffnen/schließen">☰</button>
      <a href="#" class="brand-link"><span class="brand"><span class="dot"></span><span>MietRadar München</span></span></a>
      <nav class="main-nav">
        <a id="btnRegister" class="nav-link nav-outline" href="register.html" aria-label="Registrieren">Registrieren</a>
        <a id="btnLogin" class="nav-link nav-outline" href="login.html" aria-label="Anmelden">Anmelden</a>
        <a href="#" class="nav-link btn-cta" id="btnPost" aria-label="Inserieren">Inserieren ab 0 €</a>
        <button id="themeToggle" class="authbtn" aria-label="Theme umschalten">Theme</button>
      </nav>
    </div>
  </header>

  <main class="wrap main-wrap">
    <!-- HERO SECTION -->
    <section class="hero-section" aria-label="Herzlich Willkommen">
      <div class="hero-content">
        <h1>Finde deine Traumwohnung in München</h1>
        <p class="hero-subtitle">Über 5.000+ aktuelle Wohnungsangebote · Echtzeit-Updates · Sicher & Kostenlos</p>
        <div class="hero-gallery">
          <img class="hero-photo" loading="lazy" src="https://images.unsplash.com/photo-1493666438817-866a91353ca9?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Wohnzimmer einer Mietwohnung" onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'1600\' height=\'900\'><rect width=\'100%\' height=\'100%\' fill=\'%23f3f4f6\'/><text x=\'50%\' y=\'50%\' dominant-baseline=\'middle\' text-anchor=\'middle\' fill=\'%236b7280\' font-family=\'Arial, Helvetica, sans-serif\' font-size=36>Bild nicht verfügbar</text></svg>'" />
          <img class="hero-photo" loading="lazy" src="https://images.unsplash.com/photo-1524758631624-e2822e304c36?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Wohnzimmer in einer normalen Mietwohnung" onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'1600\' height=\'900\'><rect width=\'100%\' height=\'100%\' fill=\'%23f3f4f6\'/><text x=\'50%\' y=\'50%\' dominant-baseline=\'middle\' text-anchor=\'middle\' fill=\'%236b7280\' font-family=\'Arial, Helvetica, sans-serif\' font-size=36>Bild nicht verfügbar</text></svg>'" />
          <img class="hero-photo" loading="lazy" src="https://images.unsplash.com/photo-1549187774-b4b5f6a1f2b3?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3" alt="Küche einer Mietwohnung" onerror="this.onerror=null;this.src='data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\' width=\'1600\' height=\'900\'><rect width=\'100%\' height=\'100%\' fill=\'%23f3f4f6\'/><text x=\'50%\' y=\'50%\' dominant-baseline=\'middle\' text-anchor=\'middle\' fill=\'%236b7280\' font-family=\'Arial, Helvetica, sans-serif\' font-size=36>Bild nicht verfügbar</text></svg>'" />
        </div>
        <div class="hero-stats">
          <div class="hero-stat"><strong>5.234</strong><span>Angebote live</span></div>
          <div class="hero-stat"><strong>48</strong><span>Neue heute</span></div>
          <div class="hero-stat"><strong>2.847</strong><span>Diese Woche angesehen</span></div>
        </div>
      </div>
    </section>

    <!-- TOP-ANGEBOTE -->
    <section class="card topbar" aria-label="Top-Angebote">
      <div class="tophead"><h2>Aktuelle Top-Angebote</h2><p class="topsubtitle">Die beliebtesten Wohnungen in dieser Woche</p></div>
      <div class="topscroller" id="topOffers" role="list" aria-label="Top-Angebote Scroller"></div>
    </section>

    <div class="grid">
      <!-- Filter -->
      <section class="card" aria-label="Suche und Filter">
        <h2>Suche & Filter</h2>
        <label for="q">Stadt/Bezirk</label>
        <input id="q" placeholder="z. B. Schwabing-West" value="München" />

        <div class="row">
          <div>
            <label for="maxRent">Max. Kaltmiete (€)</label>
            <input id="maxRent" type="number" min="0" step="50" inputmode="numeric" placeholder="1400" />
          </div>
          <div>
            <label for="rooms">Min. Zimmer</label>
            <select id="rooms">
              <option value="0">egal</option>
              <option value="1">1+</option>
              <option value="2" selected>2+</option>
              <option value="3">3+</option>
              <option value="4">4+</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div>
            <label for="district">Stadtteil</label>
            <select id="district">
              <option value="">alle</option>
              <option>Altstadt-Lehel</option>
              <option>Ludwigsvorstadt-Isarvorstadt</option>
              <option>Maxvorstadt</option>
              <option>Schwabing-West</option>
              <option>Au-Haidhausen</option>
              <option>Sendling</option>
              <option>Sendling-Westpark</option>
              <option>Schwanthalerhöhe</option>
              <option>Neuhausen-Nymphenburg</option>
              <option>Moosach</option>
              <option>Milbertshofen-Am Hart</option>
              <option>Schwabing-Freimann</option>
              <option>Bogenhausen</option>
              <option>Berg am Laim</option>
              <option>Trudering-Riem</option>
              <option>Ramersdorf-Perlach</option>
              <option>Obergiesing-Fasangarten</option>
              <option>Untergiesing-Harlaching</option>
              <option>Thalkirchen-Obersendling-Forstenried-Fürstenried-Solln</option>
              <option>Hadern</option>
              <option>Pasing-Obermenzing</option>
              <option>Aubing-Lochhausen-Langwied</option>
              <option>Allach-Untermenzing</option>
              <option>Feldmoching-Hasenbergl</option>
              <option>Laim</option>
            </select>
          </div>
          <div>
            <label for="sort">Sortierung</label>
            <select id="sort">
              <option value="recent">Neueste zuerst</option>
              <option value="priceAsc">Preis ↑</option>
              <option value="priceDesc">Preis ↓</option>
              <option value="sqmAsc">€/m² ↑</option>
              <option value="sqmDesc">€/m² ↓</option>
            </select>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn" id="applyBtn">Filtern</button>
          <button class="btn secondary" id="resetBtn">Zurücksetzen</button>
        </div>
      </section>

      <!-- Ergebnisse -->
      <section class="card" aria-label="Ergebnisse">
        <div class="kpis">
          <div class="kpi"><div class="lbl">Angebote</div><div class="val" id="kpiCount">–</div></div>
          <div class="kpi"><div class="lbl">Median €/m²</div><div class="val" id="kpiMedian">–</div></div>
          <div class="kpi"><div class="lbl">Ø Zimmer</div><div class="val" id="kpiRooms">–</div></div>
        </div>
        <div id="map" class="map" aria-label="Karte München"></div>
        <div class="list" id="results"></div>
      </section>
    </div>

    <!-- Marktstatistiken & Heatmap -->
    <section class="card stats-section" style="margin-top:24px" aria-label="Marktstatistiken">
      <h2>Wohnungsmarkt München – Live-Statistiken</h2>
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M3 3v18h18" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M21 14v5" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M16 10v9" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/><path d="M11 6v13" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <h3>Durchschnittspreis</h3>
          <p class="stat-value">€18,50/m²</p>
          <p class="stat-change">↑ 2,3% diesen Monat</p>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.6"/><path d="M12 7v6l4 2" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>
          <h3>Durchschnittl. Wartezeit</h3>
          <p class="stat-value">4,2 Tage</p>
          <p class="stat-change">bis zur Vermietung</p>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M12 2l2.5 5L20 9l-4 3 1 6-5-3-5 3 1-6L4 9l5.5-2L12 2z" stroke="currentColor" stroke-width="1.2" fill="currentColor"/></svg>
          </div>
          <h3>Beliebteste Stadtteile</h3>
          <p class="stat-value">Schwabing · Haidhausen</p>
          <p class="stat-change">basierend auf Anfragen</p>
        </div>
        <div class="stat-card">
          <div class="stat-icon">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden><path d="M12 2l3 7h7l-5.5 4.5L20 22l-8-5-8 5 1.5-8.5L0 9h7z" stroke="currentColor" stroke-width="1.2" fill="currentColor"/></svg>
          </div>
          <h3>Teuerste Bezirke</h3>
          <p class="stat-value">Altstadt-Lehel</p>
          <p class="stat-change">€24,80/m² durchschnitt</p>
        </div>
      </div>

      <div class="heatmap-container">
        <h3>Nachfrage-Heatmap nach Stadtteil</h3>
        <p class="heatmap-desc">Karte zeigt relative Nachfrage nach Ihren aktuellen Filtereinstellungen. Klicken Sie auf einen Bezirk für Details.</p>
        <div id="heatmapLegend" class="heatmap-legend" aria-hidden></div>
      </div>
    </section>

    <!-- placeholder removed -->

    <footer>© 2025 MietRadar München · Karten © OpenStreetMap-Mitwirkende · Tiles via OSM/Leaflet</footer>
  </main>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
          crossorigin="anonymous"></script>

  <!-- Snackbar element -->
  <div id="snackbar" role="status" aria-live="polite" class="snackbar" hidden></div>

  <!-- App JS -->
  <script defer src="./app.js"></script>
</body>
</html>
